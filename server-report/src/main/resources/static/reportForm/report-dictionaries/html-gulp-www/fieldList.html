<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title></title>
	<link rel="stylesheet" href="../../../reportForm/report-base/css/trade_base.css">
	<link rel="stylesheet" href="../../../base/iconfont/iconfont.css">
	<link rel="stylesheet" href="../../../reportForm/report-home/css/commonHeader.css">
	<script src="../../../base/js/jquery.js"></script>
	<script src="../../../base/js/public.js"></script>
	<script src="../../../base/js/docassistant.js" ></script>
	<script src="../../../base/js/validate.js"></script>
	<script src="../../../base/js/jquery.cookie.js"></script>
	<script src='../../../titleName.js'></script>
	<script src="../../../reqConfig.js"></script>
	<script src="../../../reportForm/report-home/js/commonHeader.js"></script>
	<!--！！！！！！
		组件js
	！！！！！！！-->
	<script type="text/javascript" src="../../../base/js/ajaxupload.js"></script>
	<!--时间插件-->
	<link rel="stylesheet" href="../../../plugin/WdatePickerBlue/My97DatePicker/skin/messageWdatePicker.css">
	<script src="../../../plugin/WdatePickerBlue/My97DatePicker/WdatePicker.js"></script>
	<!--弹框插件-->
	<link rel="stylesheet" href="../../../plugin/popup/css/manhuaDialog.1.0_blue.css">
	<script src="../../../plugin/popup/script/manhuaDialog.1.0.js"></script>
	<!--提示校验-->
	<link rel="stylesheet" href="../../../plugin/tip/css/tip-twitter/tip-twitter.css">
	<script src="../../../plugin/tip/script/jquery.poshytip.js"></script>
	<!--滑动校验-->
	<link rel="stylesheet" href="../../../plugin/dragValidate/css/drag.css">
	<script src="../../../plugin/dragValidate/js/drag.js"></script>
	<!--分页-->
	<link rel="stylesheet" href="../../../plugin/page/css/table.css">
	<script type="text/javascript" src="../../../plugin/page/script/jquery.page.js"></script>
	<!--下拉选择-->
	<link rel="stylesheet" href="../../../plugin/select/chosen_blue.css">
	<script src="../../../plugin/select/chosen.jquery.js"></script>
	<!--树插件-->
	<link rel="stylesheet" href="../../../plugin/treeview/jquery.treeview.css" />
	<script src="../../../plugin/treeview/jquery.treeview.js"></script>
	<script type="text/javascript" src="../../../plugin/treeview/demo.js"></script>
</head>
<body id="outerBody" class="tradebase">
	<div class="tradebasebox">
		<div class="tradebase-top clearfix effectBox" effectType="1" style="position: fixed;z-index: 99999999999;">
			<div class="tradebase-toplogo leftW">
				<div class="tradebase-toplogo__logo">
					<img src="../../../reportForm/report-home/images/logo.png" alt="">
				</div>
			</div>
			<div class="tradebase-topnavbox maxVisbleB">
				<nav>
					<div class="tradebase-topnav">
						<div class="tradebase-topnavinner allItemB">
							<a href="#" class="tradebase-topnavinner__item itemW">
								<p class="tradebase-topnavinner__text" jumpUrl="../../../reportForm/report-mine/html-gulp-www/myInfoList.html" firstMark="1">个人主题数据</p>
							</a>
							<a href="#" class="tradebase-topnavinner__item itemW">
								<p class="tradebase-topnavinner__text" jumpUrl="../../../reportForm/report-analyze/html-gulp-www/dataAnalyze.html">自定义分析</p>
							</a>
							<a href="#" class="tradebase-topnavinner__item itemW">
								<p class="tradebase-topnavinner__text" jumpUrl="../../../reportForm/report-dictionaries/html-gulp-www/dataSourceList.html" firstMark="2">数据字典</p>
							</a>
							<a href="#" class="tradebase-topnavinner__item itemW">
								<p class="tradebase-topnavinner__text" jumpUrl="../../../reportForm/report-authorization/html-gulp-www/authorization.html">数据授权</p>
							</a>
							<a href="#" class="tradebase-topnavinner__item itemW">
								<p class="tradebase-topnavinner__text" jumpUrl="../../../reportForm/report-logAnalyze/html-gulp-www/logAnalyze.html">分析日志</p>
							</a>
							<a href="#" class="tradebase-topnavinner__item itemW">
								<p class="tradebase-topnavinner__text" jumpUrl="../../../reportForm/report-limit/html-gulp-www/orgFrame.html" firstMark="3">权限管理</p>
							</a>
						</div>
					</div>
				</nav>
			</div>
			<span class="fr" id="quitOperate" style="cursor: pointer;margin-right: 10px;">
				<div class="fl" style="background-image: url('../../../reportForm/report-home/images/tc.png');width: 30px;height: 30px;margin-right: 6px;margin-top: 18px;background-size: 30px 30px;"></div>
				<span class="fl" style="color: #fff;line-height: 64px;">退出</span>
			</span>
		</div>
		<div class="tradebase-btm effectBox" effectType="2">
			<div class="tradebase-side leftW"  id="bodyLeft">
				<!--<div class="tradebase-side-all">
					<i class="tradebase-side-all__btn"></i>
				</div>-->
				<div class="tradebase-innerside">
					<div class="tradebase-sidebox">
						<div class="tradebase-sidebox163">
							<ul class="tradebase-side-nav">
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-mine/html-gulp-www/myInfoList.html" firstMark="1">我的数据报表</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-mine/html-gulp-www/selfSearch.html" firstMark="1">我的自定义查询</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-mine/html-gulp-www/myInfoDown.html" firstMark="1">我的数据下载</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-dictionaries/html-gulp-www/dataSourceList.html" firstMark="2">数据源管理列表</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-dictionaries/html-gulp-www/dictionaries.html" firstMark="2">数据字典管理</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-dictionaries/html-gulp-www/fieldList.html" firstMark="2">元数据管理字段列表</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>

								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-limit/html-gulp-www/orgFrame.html" firstMark="3">组织管理</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-limit/html-gulp-www/roleManage.html" firstMark="3">角色管理</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-limit/html-gulp-www/resourceManage.html" firstMark="3">资源管理</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-limit/html-gulp-www/userManage.html" firstMark="3">人员管理</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								<li class="tradebase-side-nav__item asideP" style="display: none;">
									<a href="#" class="tradebase-side-nav__link">
										<p class="tradebase-side-nav__text" jumpUrl="../../../reportForm/report-limit/html-gulp-www/systemManage.html" firstMark="3">系统管理</p>
										<!--<i class="tradebase-side-nav__icon upstatus"></i>-->
									</a>
								</li>
								
							</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="tradebase-right"  id="bodyRight">
				<div class="tradebase-rightinner">

					<div class="tradebase-main">

<link rel="stylesheet" href="../css/fieldList.css">

<script>
    var oAlertCommon = new clsAlertBoxCtrl();
    jQuery(function(){
        $("#moreArrget").on("click",function () {

			var addrr =[];
			for(var i=0;i<$("#tableList").find("*[id=cloneRow]").length;i++){
				if($("#tableList").find("*[id=cloneRow]").eq(i).find("input:first").is(":checked")){
					addrr.push($("#tableList").find("*[id=cloneRow]")[i].jsonData);
				}
			}
			if(addrr.length>0){
                getAjaxResult("/report/dataDict/extract","post",addrr,function(data){
                    if(JSON.parse(data).retCode =="0000000"){
                        alert("抽取成功！");
                        $("*[id=chkCoding]").attr("checked",false);
                    }else {
                        alert(JSON.parse(data).retDesc);
                        $("*[id=chkCoding]").attr("checked",false);
                    }
                })
			}else {
			    alert("请勾选元数据列表！");
			}

        })

        // $("#moreArrget").on("click",function(){
		//     getAjaxResult("/report/dataDict/extract","post",{},"countSuc(data)")
        //
		// });

    });
    function countSuc(data){
        if(JSON.parse(data).retCode =="0000000"){
            oAlertCommon.Alert("当前抽取数据"+JSON.parse(data).rspBody.count+"条，是否确认抽取？","提示","","ifget");
        }
	}
    function clsStandardTableCtrl$progress(jsonItem, cloneRow) {
        if(jsonItem.rowLevelAuth == "1")
            $(cloneRow).find("#rowLevelAuthTxt").text("是");
        else
            $(cloneRow).find("#rowLevelAuthTxt").text("否");
        $(cloneRow).find("#lookolnyData").click(function(){
            var reqResut = {"fieldId":jsonItem.fieldId};
            $("#dataList").attr({"comtype":"standardTableCtrl","reqparam":JSON.stringify(reqResut)});
            document.body.jsCtrl.ctrl = $("#dataList")[0];
            document.body.jsCtrl.init();
            openWin(750,530,"putdata",true);
		});
        $(cloneRow).find("#getolnyData").click(function () {
            var getArr = [];
            getArr.push(jsonItem);
            getAjaxResult("/report/dataDict/extract","post",getArr,function(data){
                if(JSON.parse(data).retCode =="0000000"){
                    alert("抽取成功！");
                }else {
                    alert(JSON.parse(data).retDesc);
                }
            })
        })
	}
    //点击确认执行的方法
    function clsAlertBoxCtrl$sure() {
//        if(this.html.indexOf("操作成功") > -1){
//            window.location.href = "/static/purchaser/enquiry_pur/html-gulp-www/enquiry_lobby.html";
//        }
        if(this.id == "ifget"){

		}
    }
</script>
<div class="downloadcet">
	<div class="downloadcet-main">
		<div class="main-title ">
			<strong class="main-title__sign"></strong>
			<h1 class="main-title__tie" style="font-weight: 800">数据字典 > 元数据管理字段列表</h1>
		</div>
		<div class="main-box clearfix" id="themeSearch">
		<span class="ml15 fl">
				<i  class="fl">数据源</i>
				<select id="databaseType" class="comSelect template-tablebox_select required"   comType="unionSelectCtrl" isEmptyShow="1"
						reqPath="/report/datasource/down/all" childReqPath="/report/dataTable/all" childReqParam
						method="post" paramName="" reqParam="{}" unionSel="tableId" emptyValue="请选择"selcode="datasourceId"
						selvalue="datasourceChineseName">
                </select>
			</span>
			<span class="ml15 fl">
				<i class="fl">主题表</i>
					<select id="tableId" class="comSelect template-tablebox_select required"  comtype="	"
							reqpath="/report/dataTable/all" reqparam="{}" method="post" selcode="tableId" paramName="datasourceId" selvalue="tableName">

                </select>
			</span>
            <div class="search_btn_class" comtype="searchBtnCtrl" cond="databaseType,tableId" rule="cond" uniontableid="tableList" parentId="themeSearch">
                <i class="icon iconfont mr5">&#xe645;</i><span>查询</span>
            </div>
		</div>
		<div class="main-table">
			<div class="btn_kind_1  supplier-top-submit fr mr10 mb10" id="moreArrget">批量抽取</div>
			<table class="table-list" id="tableList" comtype="standardTableCtrl"
				   templateid="templateRow"  chkid="chkCoding"
				   page="tcdPageCode" nodata="noDataCon"
				   reqpath="/report/dataField/metadata" reqparam="{}" method="post" style="table-layout: fixed">
				<thead>
				<tr class="table-list__Tr" >
					<th class="table-list__thead" style="width: 5%">
						<input type="checkbox" id="allChk" comtype="checkAll" cond="" uniontableid="tableList"  chkid="chkCoding" class="clsChk" >
					</th>
					<th class="table-list__thead" style="width: 8%">字段</th>
					<th class="table-list__thead" style="width: 15%">数据表</th>
					<th class="table-list__thead" style="width: 13%">字段编码</th>
					<th class="table-list__thead" style="width: 15%">字段名称</th>
					<th class="table-list__thead" style="width: 12%">字段类型</th>
					<th class="table-list__thead" style="width: 15%">维度指标</th>
					<th class="table-list__thead" style="width: 10%">精度</th>
					<th class="table-list__thead" style="width: 10%">是否行级授权</th>
					<th class="table-list__thead" style="width: 10%">元数据数量</th>
					<th class="table-list__thead" style="width: 20%">备注</th>
					<th class="table-list__thead" style="width: 15%">操作</th>
				</tr>
				</thead>
				<tbody>
				<tr class="table-list__str" id="templateRow" style="display:none">
					<td class="table-list__td" >
						<input type="checkbox"  id="chkCoding">
					</td>
					<td class="table-list__td" id="fieldId"></td>
					<td class="table-list__td" id="tableName"></td>
					<td class="table-list__td" id="fieldCode"></td>
					<td class="table-list__td"  id="fieldName"></td>
					<td class="table-list__td" id="fieldType" ></td>
					<td class="table-list__td" id="dimensionIndex" >
						<!--<select name="" class="comSelect-select" >-->
							<!--<option value="new">请选择</option>-->
							<!--<option value="dimension">维度</option>-->
							<!--<option value="measures">指标</option>-->
						<!--</select>-->
					</td>
					<td class="table-list__td"  id="accuracy"></td>
					<td class="table-list__td" id="">
						<span id="rowLevelAuthTxt"></span>
						<!--<select name="" class="comSelect comSelect-select" id="rowLevelAuth" emptyValue="请选择" style="display:none">-->
							<!--<option value="1">是</option>-->
							<!--<option value="0">否</option>-->
						<!--</select>-->
					</td>
					<td class="table-list__td" id="metadataCount">

					</td>
					<td class="table-list__td"  id="remark"></td>
					<td class="table-list__td" id="">
						<a href="javascript:;" class="" style="color: #0375d7" id="lookolnyData">查看</a>
						<a href="javascript:;" class="" style="color: #0375d7" id="getolnyData" style="margin-top: 2px">抽取</a>
					</td>
				</tr>
				</tbody>
			</table>
			<div id="noDataCon" class="noDataCon" style="display:none">
				<i></i><p>暂无数据.....</p>
			</div>
			<div class="tcdPageCode"></div>
		</div>
	</div>
</div>
<!--//抽取元数据弹框-->
<div id="putdata" class="popup" style="display: none">
	<div class="title" style="border-bottom:1px solid #0375D7">
		<h2>元数据查看</h2>
		<div>
			<a class="min" href="javascript:;" title="最小化" style="display:none;"></a>
			<a class="max" href="javascript:;" title="最大化" style="display:none;"></a>
			<a class="revert" href="javascript:;" title="还原" style="display:none;"></a>
			<a class="close" href="javascript:;" title="关闭" style=""></a>
		</div>
	</div>
	<div class="content datasource p10">
		<!--standardEditTableCtrl-->
		<div style="height: 420px;overflow: auto">
			<table class="table-list" id="dataList" comtype=""
				   templateid="templateRow"  chkid="chkCoding"
				   page="tcdPageCode1" nodata="noDataCon"
				   reqpath="/report/dataDict/list" reqparam="{}" method="post" style="table-layout: fixed">
				<thead>
				<tr class="table-list__Tr" >
					<!--<th class="table-list__thead" style="width: 5%">-->
						<!--<input type="checkbox" id="allChk" comtype="checkAll" cond="" uniontableid="fieldList"  >-->
					<!--</th>-->
					<th class="table-list__thead" style="width: 8%">字段值</th>
				</tr>
				</thead>
				<tbody>
				<tr class="table-list__str" id="templateRow" style="display:none">
					<!--<td class="table-list__td" >-->
						<!--<input type="checkbox"  id="chkCoding">-->
					<!--</td>-->
					<td class="table-list__td" id="fieldValue"></td>
				</tr>
				</tbody>
			</table>

		</div>
		<div class="tcdPageCode1"></div>
		<div class="btn">
			<a href="javascript:;" class="btnOne btn_kind_6 mr20" id="yesshen" onclick="">确认</a>
			<!--<a href="javascript:;" class="btnOne btnStyle1 nobackC" id="nobackC">返回</a>-->
		</div>
	</div>
</div>
</div>
</div>

</div>
</div>
</div>
</body>
</html>